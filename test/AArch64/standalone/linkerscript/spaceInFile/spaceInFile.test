# Test that we actually Reserve space in file.
RUN: %clang %clangopts -target aarch64 -c %p/Inputs/1.c -o %t1.o
RUN: %link %linkopts -march aarch64 %t1.o -T %p/Inputs/script.t -o %t1.out -z max-page-size=0x1000
RUN: %readelf -l -W %t1.out | %filecheck %s -check-prefix=PHDR
RUN: %readelf -W -s %t1.out | %filecheck %s -check-prefix=SYMBOLS

#PHDR:  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x001000 0x0000000000000000 0x0000000000000000 0x000010 0x000010 R E 0x1000
#PHDR:  LOAD           0x001010 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x001010 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x002000 0x0000000000001000 0x0000000000001000 0x000000 0x27f4c0 RW  0x1000
#PHDR:  LOAD           0x002000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR:  LOAD           0x002000 0x0000000000000000 0x0000000000000000 0x000000 0x000000     0x1000
#PHDR: Section to Segment mapping:
#PHDR:  Segment Sections...
#PHDR:   00
#PHDR:   01
#PHDR:   02
#PHDR:   03
#PHDR:   04     .text
#PHDR:   05
#PHDR:   06
#PHDR:   07     .bss .demback_offoad_bss
#PHDR:   08
#PHDR:   09

#SYMBOLS: 0000000000001040     0 NOTYPE  GLOBAL DEFAULT    3 __hw_demback_buffer_start__
#SYMBOLS: 000000000027f480     0 NOTYPE  GLOBAL DEFAULT  ABS __hw_demback_buffer_size__
#SYMBOLS: 00000000002804c0     0 NOTYPE  GLOBAL DEFAULT    3 __hw_demback_buffer_end__
