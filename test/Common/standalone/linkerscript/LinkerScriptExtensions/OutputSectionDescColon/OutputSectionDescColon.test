#---LoadSectionsAfterDebugSections.test-------------- Executable,LS --------------------#
#BEGIN_COMMENT
# This test checks that the linker accepts 'OutSection: { ... }' syntax when
# --use-linker-script-extensions option is used.
#END_COMMENT
#START_TEST
RUN: %clang %clangopts -o %t1.1.o %p/Inputs/1.c -c -ffunction-sections
RUN: %not %link %linkopts -o %t1.1.err.out %t1.1.o -T %p/Inputs/script.t 2>&1 \
RUN:   | %filecheck %s --check-prefix=ERR --strict-whitespace --match-full-lines
RUN: %link %linkopts -o %t1.1.out %t1.1.o -T %p/Inputs/script.t --use-linker-script-extensions
RUN: %readelf -S %t1.1.out | %filecheck %s -check-prefix=READELF
#END_TEST

ERR:Error: {{.*}}Inputs/script.t:2: : expected, but got {
ERR:>>>   FOO: { *(.text.foo) }
ERR:>>>        ^

READELF: FOO PROGBITS
READELF: BAR PROGBITS
