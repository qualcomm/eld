#---EmptyArchiveFile.test--------- Executable --------------------#
#BEGIN_COMMENT
# This test checks that the YAML map-file is correctly emitted when the link
# contains an empty archive file.
#END_COMMENT
#START_TEST
RUN: %clang %clangopts -o %t1.1.o %p/Inputs/1.c -c
RUN: %ar cr %t1.lib.a
RUN: %link %linkopts -o %t1.1.out %t1.1.o %t1.lib.a -MapStyle yaml \
RUN:   -Map %t1.1.map.yaml 2>&1 | %filecheck %s
RUN: %filecheck %s --check-prefix=MAP < %t1.1.map.yaml
#END_TEST

CHECK: Note: Empty archive file: '{{.*}}lib.a'

MAP: Header
MAP: LinkStats
MAP: Inputs:
MAP: - {{.*}}1.o
