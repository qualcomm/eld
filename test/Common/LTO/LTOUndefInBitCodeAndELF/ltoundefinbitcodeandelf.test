# Check that the linker is able to preserve a symbol if the symbol is undefined
# in ELF and Bitcode
RUN: %clang %clangopts -c %p/Inputs/1.c -o %t1.1.o  -flto
RUN: %clang %clangopts -c %p/Inputs/2.c -o %t1.2.o  -flto
RUN: %clang %clangopts -c %p/Inputs/3.c -o %t1.3.o 
RUN: %clang %clangopts -c %p/Inputs/4.c -o %t1.4.o 
RUN: %link %linkopts  %t1.1.o %t1.3.o %t1.2.o %t1.4.o  --trace=symbol=baz --trace=lto -o %t.out 2>&1 | %filecheck %s
RUN: %link %linkopts  %t1.3.o %t1.1.o %t1.2.o %t1.4.o  --trace=symbol=baz --trace=lto -o %t.out 2>&1 | %filecheck %s

#CHECK: Preserving symbol baz
